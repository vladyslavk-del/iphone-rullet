<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your New iPhone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: white;
            overflow: hidden; /*-Hide-page-scroll-*/
        }
        /*-Wheel-container-*/
        #wheel-container {
            position: relative;
            width: 100%;
            height: 200px; /*-Reduced-for-mobile-*/
            overflow: hidden;
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
        }
        @media (min-width: 768px) {
            #wheel-container {
                height: 250px; /*-Restored-for-desktop-*/
            }
        }
        /*-The-wheel-itself-*/
        #wheel {
            display: flex;
            height: 100%;
            will-change: transform;
            animation: scroll 15s linear infinite; /* Slower default speed */
        }
        /*-Class-to-stop-the-wheel-*/
        #wheel.stopping {
            animation-play-state: paused;
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .iphone-box {
            width: 150px; /*-Reduced-for-mobile-*/
            height: 150px;
            margin: 0 15px;
            flex-shrink: 0;
            background-color: #374151;
            border-radius: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem; /*-Reduced-font-size-*/
            font-weight: bold;
            color: transparent; /*-Make-text-transparent,-in-case-image-fails-to-load-*/
            background-size: contain; /*-Ensure-the-image-fits-completely-*/
            background-repeat: no-repeat; /*-Prevent-image-repetition-*/
            background-position: center;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            border: 2px solid #4B5563;
        }

        @media (min-width: 768px) {
            .iphone-box {
                width: 200px; /*-Restored-size-for-desktop-*/
                height: 200px;
                margin: 0 20px;
                font-size: 1.5rem;
            }
        }

        /*-Scrolling-animation-*/
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%); /*-Scroll-half-the-width-*/
            }
        }
        /*-Central-pointer-*/
        #pointer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -62%); /* <-- Lowered it a tiny bit */
            width: 160px; /*-Reduced-size-*/
            height: 160px; /*-Reduced-size-*/
            border: 4px solid #34D399; /*-Bright-green-color-*/
            border-radius: 1.5rem;
            box-shadow: 0 0 25px #34D399, inset 0 0 15px rgba(52, 211, 153, 0.5);
            z-index: 10;
        }
        @media (min-width: 768px) {
            #pointer {
                width: 210px; /*-Reduced-size-for-desktop-*/
                height: 210px; /*-Reduced-size-for-desktop-*/
            }
        }
        /*-Styles-for-modals-*/
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: #1F2937;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            text-align: center;
            border: 1px solid #4B5563;
        }
        /*-Freeze-overlay-*/
        #freeze-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(17, 24, 39, 0.8);
            z-index: 40;
            backdrop-filter: blur(2px);
        }
        #close-timer-button {
            font-size: 2rem;
            line-height: 1;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="text-center mb-4 md:mb-8">
        <h1 class="text-4xl md:text-6xl font-black tracking-tight">IPHONE SPIN</h1>
    </div>
    
    <!-- Wheel container and pointer -->
    <div id="wheel-container" class="relative w-full flex items-center my-8">
        <div id="wheel"></div>
        <div id="pointer"></div>
    </div>
    
    <!-- GET button -->
    <button id="get-button" class="mt-4 md:mt-8 bg-emerald-500 hover:bg-emerald-400 text-gray-900 font-bold text-xl md:text-2xl py-3 px-12 md:py-4 md:px-16 rounded-full shadow-lg shadow-emerald-500/30 transform hover:scale-105 transition-all duration-300">
        GET
    </button>
    
    <!-- Modal #1: Result -->
    <div id="result-modal" class="modal-backdrop hidden">
        <div class="modal-content animate-pulse">
            <div id="winning-iphone" class="iphone-box mx-auto mb-6"></div>
            <h2 class="text-3xl font-bold mb-4">Congratulations!</h2>
            <button id="get-link" class="mt-4 bg-emerald-500 hover:bg-emerald-400 text-gray-900 font-bold text-xl py-3 px-8 rounded-lg shadow-lg shadow-emerald-500/30 transform hover:scale-105 transition-all duration-300">
                Get your new iPhone 17
            </button>
        </div>
    </div>

    <!-- Modal #2: Map and form -->
    <div id="map-modal" class="modal-backdrop hidden">
        <div class="modal-content w-11/12 md:w-1/2 lg:w-1/3">
             <h2 class="text-2xl font-bold mb-6">Enter your details</h2>
             <div class="space-y-4">
                 <input id="name-input" type="text" placeholder="Your name" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500">
                 <input id="address-input" type="text" placeholder="Your address" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-500">
             </div>
             <button id="ok-button" class="mt-8 w-full bg-emerald-500 hover:bg-emerald-400 text-gray-900 font-bold py-3 px-6 rounded-lg transition-colors">
                OK
             </button>
        </div>
    </div>

    <!-- Modal #3: Timer -->
    <div id="timer-modal" class="modal-backdrop hidden">
        <div class="modal-content w-11/12 md:w-1/2 lg:w-1/3 relative">
            <button id="close-timer-button" class="absolute top-2 right-4 text-gray-400 hover:text-white">&times;</button>
            <div id="timer-iphone-image" class="iphone-box mx-auto mb-6"></div>
            <h2 class="text-xl md:text-2xl font-bold mb-4">You will receive your iPhone soon!</h2>
            <div id="countdown-timer" class="text-3xl md:text-4xl font-mono font-bold text-emerald-400"></div>
        </div>
    </div>


    <!-- Overlay for freeze effect -->
    <div id="freeze-overlay" class="hidden"></div>


    <script>
        const wheel = document.getElementById('wheel');
        const getButton = document.getElementById('get-button');
        const resultModal = document.getElementById('result-modal');
        const mapModal = document.getElementById('map-modal');
        const getLink = document.getElementById('get-link');
        const okButton = document.getElementById('ok-button');
        const winningIphoneDiv = document.getElementById('winning-iphone');
        const freezeOverlay = document.getElementById('freeze-overlay');
        const timerModal = document.getElementById('timer-modal');
        const countdownTimer = document.getElementById('countdown-timer');
        const timerIphoneImage = document.getElementById('timer-iphone-image');
        const closeTimerButton = document.getElementById('close-timer-button');

        let countdownInterval;

        const iphoneModels = [15, 16, 17];
        const repeatedModels = [...iphoneModels, ...iphoneModels, ...iphoneModels, ...iphoneModels, ...iphoneModels, ...iphoneModels, ...iphoneModels]; // Repeat for infinite scroll effect
        
        // Generate iPhones in the wheel
        repeatedModels.forEach(model => {
            const div = document.createElement('div');
            div.className = 'iphone-box';
            
            let imageUrl = '';
            // Links to your images
            switch (model) {
                case 15:
                    imageUrl = 'https://i.postimg.cc/k26R7jsF/pngwing-com-1.png';
                    break;
                case 16:
                    imageUrl = 'https://i.postimg.cc/CR3B5jrq/i-Phone-16-Pro-Max.png';
                    break;
                case 17:
                    // This is the winning phone.
                    imageUrl = 'https://i.postimg.cc/v4JgTW2f/i-Phone-17-Pro-Max-Render-PNG.png';
                    break;
            }

            div.style.backgroundImage = `url(${imageUrl})`;
            
            if (model === 17) {
                div.classList.add('iphone-17'); // Add class for the winner
            }
            wheel.appendChild(div);
        });
        
        // On "GET" button click
        getButton.addEventListener('click', () => {
            getButton.disabled = true;
            getButton.classList.remove('hover:bg-emerald-400', 'hover:scale-105');
            getButton.classList.add('opacity-50', 'cursor-not-allowed');

            freezeOverlay.classList.remove('hidden'); // Show freeze overlay
            
            // 1. Speed up the wheel
            wheel.style.animationDuration = '1.5s';

            // 2. Wait for a moment, then start the stopping sequence
            setTimeout(() => {
                wheel.classList.add('stopping');

                const allItems = document.querySelectorAll('.iphone-box');
                const itemsArray = Array.from(allItems);
                const winnerElements = document.querySelectorAll('.iphone-17');
                // Select a "winning" element from the middle of the list to ensure a smooth stop
                const targetWinner = winnerElements[Math.floor(winnerElements.length / 2)];
                
                // Calculate stopping position
                const containerWidth = wheel.parentElement.offsetWidth;
                const itemWidth = itemsArray[0].offsetWidth;

                // Winner's position relative to the start of the wheel
                const winnerPosition = targetWinner.offsetLeft + itemWidth / 2;
                
                // Center of the container
                const centerPoint = containerWidth / 2;
                
                // Final offset. We subtract half the width to center the element.
                let finalOffset = -(winnerPosition - centerPoint);
                
                // Set the final position
                wheel.style.transform = `translateX(${finalOffset}px)`;
                
                // Show the modal after the animation finishes
                setTimeout(() => {
                    // Winning iPhone image
                    winningIphoneDiv.style.backgroundImage = `url(https://i.postimg.cc/v4JgTW2f/i-Phone-17-Pro-Max-Render-PNG.png)`;
                    winningIphoneDiv.textContent = ''; // Clear text from the modal box
                    resultModal.classList.remove('hidden');
                    freezeOverlay.classList.add('hidden'); // Hide freeze overlay
                }, 5000); // 5 seconds, same as the CSS animation
            }, 2500); // Let it spin fast for 2.5 seconds before stopping
        });
        
        // On "Get your new iPhone" link click
        getLink.addEventListener('click', () => {
            resultModal.classList.add('hidden');
            mapModal.classList.remove('hidden');
        });

        // On "OK" click in the form
        okButton.addEventListener('click', () => {
            mapModal.classList.add('hidden');
            timerIphoneImage.style.backgroundImage = `url(https://i.postimg.cc/v4JgTW2f/i-Phone-17-Pro-Max-Render-PNG.png)`;
            timerModal.classList.remove('hidden');
            startCountdown();
        });

        closeTimerButton.addEventListener('click', () => {
            timerModal.classList.add('hidden');
            clearInterval(countdownInterval);
            resetGame();
        });


        function startCountdown() {
            const countdownDuration = (2 * 24 * 60 * 60 * 1000) + (12 * 60 * 60 * 1000); // 2 days, 12 hours
            const endTime = Date.now() + countdownDuration;

            countdownInterval = setInterval(() => {
                const now = Date.now();
                const remaining = endTime - now;

                if (remaining < 0) {
                    clearInterval(countdownInterval);
                    countdownTimer.textContent = "00d 00h 00m 00s";
                    return;
                }

                const days = Math.floor(remaining / (1000 * 60 * 60 * 24));
                const hours = Math.floor((remaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((remaining % (1000 * 60)) / 1000);

                countdownTimer.textContent = `${String(days).padStart(2, '0')}d ${String(hours).padStart(2, '0')}h ${String(minutes).padStart(2, '0')}m ${String(seconds).padStart(2, '0')}s`;

            }, 1000);
        }

        function resetGame() {
             wheel.classList.remove('stopping');
             wheel.style.transform = '';
             wheel.style.animationDuration = ''; // Reset animation speed
             getButton.disabled = false;
             getButton.classList.add('hover:bg-emerald-400', 'hover:scale-105');
             getButton.classList.remove('opacity-50', 'cursor-not-allowed');
             // Clear input fields
             document.getElementById('name-input').value = '';
             document.getElementById('address-input').value = '';
        }

    </script>
</body>
</html>

